# üßÆ Cap√≠tulo 2: Configs e Fundamentos

Se um arquivo chamado `conf.lua` estiver presente na pasta do seu jogo (ou dentro do arquivo `.love`), ele ser√° executado antes de os m√≥dulos do L√ñVE serem carregados. Voc√™ pode usar esse arquivo para sobrescrever a fun√ß√£o `love.conf`, que ser√° chamada posteriormente pelo script de ‚Äúboot‚Äù do L√ñVE. Atrav√©s de `love.conf` √© poss√≠vel definir op√ß√µes de configura√ß√£o, alterar o tamanho padr√£o da janela, escolher quais m√≥dulos ser√£o carregados e ajustar outras configura√ß√µes iniciais do programa.

A fun√ß√£o `love.conf` deve estar definida em um arquivo chamado `conf.lua`. Ela n√£o funcionar√° se for declarada dentro do `main.lua`, pois afeta a inicializa√ß√£o que ocorre antes do carregamento do `main.lua`.

Aqui est√° uma lista completa de op√ß√µes e seus valores padr√£o para L√ñVE:

```lua
function love.conf(t)
    t.identity = nil                    -- O nome do diret√≥rio de salvamento (string)
    t.appendidentity = false            -- Pesquisar arquivos no diret√≥rio de origem antes do diret√≥rio de salvamento (booleano)
    t.version = "11.4"                  -- A vers√£o do L√ñVE para a qual este jogo foi feito (string)
    t.console = false                   -- Anexar um console (booleano, apenas Windows)
    t.accelerometerjoystick = true      -- Habilitar o aceler√¥metro no iOS e Android expondo-o como joystick (booleano)
    t.externalstorage = false           -- Salvar arquivos (e ler do diret√≥rio de salvamento) em armazenamento externo no Android (booleano)
    t.gammacorrect = false              -- Habilitar renderiza√ß√£o com corre√ß√£o de gama, quando suportado pelo sistema (booleano)

    t.audio.mic = false                 -- Solicitar e usar o microfone no Android (booleano)
    t.audio.mixwithsystem = true        -- Manter m√∫sica de fundo tocando ao abrir o jogo (booleano, iOS e Android)

    t.window.title = "Untitled"         -- O t√≠tulo da janela (string)
    t.window.icon = nil                 -- Caminho para uma imagem a usar como √≠cone da janela (string)
    t.window.width = 800                -- Largura da janela (n√∫mero)
    t.window.height = 600               -- Altura da janela (n√∫mero)
    t.window.borderless = false         -- Remover todas as bordas visuais da janela (booleano)
    t.window.resizable = false          -- Permitir que a janela seja redimensionada pelo usu√°rio (booleano)
    t.window.minwidth = 1               -- Largura m√≠nima da janela se redimension√°vel (n√∫mero)
    t.window.minheight = 1              -- Altura m√≠nima da janela se redimension√°vel (n√∫mero)
    t.window.fullscreen = false         -- Habilitar tela cheia (booleano)
    t.window.fullscreentype = "desktop" -- Escolher entre tela cheia "desktop" ou "exclusive" (string)
    t.window.vsync = 1                  -- Modo de sincroniza√ß√£o vertical (n√∫mero)
    t.window.msaa = 0                   -- N√∫mero de amostras para antialiasing multiamostral (n√∫mero)
    t.window.depth = nil                -- N√∫mero de bits por amostra no buffer de profundidade
    t.window.stencil = nil              -- N√∫mero de bits por amostra no buffer de stencil
    t.window.display = 1                -- √çndice do monitor para exibir a janela (n√∫mero)
    t.window.highdpi = false            -- Habilitar modo de alta DPI em displays Retina (booleano)
    t.window.usedpiscale = true         -- Habilitar escalonamento autom√°tico de DPI quando highdpi for true (booleano)
    t.window.x = nil                    -- Coordenada x da posi√ß√£o da janela no display especificado (n√∫mero)
    t.window.y = nil                    -- Coordenada y da posi√ß√£o da janela no display especificado (n√∫mero)

    t.modules.audio = true              -- Habilitar o m√≥dulo de √°udio (booleano)
    t.modules.data = true               -- Habilitar o m√≥dulo de dados (booleano)
    t.modules.event = true              -- Habilitar o m√≥dulo de eventos (booleano)
    t.modules.font = true               -- Habilitar o m√≥dulo de fontes (booleano)
    t.modules.graphics = true           -- Habilitar o m√≥dulo de gr√°ficos (booleano)
    t.modules.image = true              -- Habilitar o m√≥dulo de imagens (booleano)
    t.modules.joystick = true           -- Habilitar o m√≥dulo de joystick (booleano)
    t.modules.keyboard = true           -- Habilitar o m√≥dulo de teclado (booleano)
    t.modules.math = true               -- Habilitar o m√≥dulo de matem√°tica (booleano)
    t.modules.mouse = true              -- Habilitar o m√≥dulo de mouse (booleano)
    t.modules.physics = true            -- Habilitar o m√≥dulo de f√≠sica (booleano)
    t.modules.sound = true              -- Habilitar o m√≥dulo de som (booleano)
    t.modules.system = true             -- Habilitar o m√≥dulo de sistema (booleano)
    t.modules.thread = true             -- Habilitar o m√≥dulo de threads (booleano)
    t.modules.timer = true              -- Habilitar o m√≥dulo de timer (booleano); desativar resulta em delta time zero no love.update
    t.modules.touch = true              -- Habilitar o m√≥dulo de touch (booleano)
    t.modules.video = true              -- Habilitar o m√≥dulo de v√≠deo (booleano)
    t.modules.window = true             -- Habilitar o m√≥dulo de janela (booleano)
end
```

√â recomend√°vel definir como false os m√≥dulos n√£o utilizados quando voc√™ lan√ßa seu jogo. Isso reduz ligeiramente o tempo de inicializa√ß√£o (especialmente se o m√≥dulo de joystick estiver desabilitado) e diminui um pouco o uso de mem√≥ria.

Note que voc√™ n√£o pode desabilitar `love.filesystem` e `love.data`; eles s√£o obrigat√≥rios. O mesmo se aplica ao pr√≥prio m√≥dulo `love`. O `love.graphics` requer que o `love.window` esteja habilitado.

## üéÆ 2.6 Aplicando no Jogo

Vamos usar os conceitos b√°sicos do lua para criar um sistema de pontua√ß√£o e vidas:

```lua
-- Vari√°veis globais do jogo
local pontuacao = 0
local vidas = 3
local jogador = {
    x = 400,
    y = 300,
    nome = "Her√≥i"
}

-- Fun√ß√£o para adicionar pontos
function adicionarPontos(valor)
    pontuacao = pontuacao + valor
    print("Pontua√ß√£o atual: " .. pontuacao)
end

-- Fun√ß√£o para perder vida
function perderVida()
    if vidas > 0 then
        vidas = vidas - 1
        print("Vidas restantes: " .. vidas)
    end

    if vidas == 0 then
        print("Game Over!")
    end
end

function love.keypressed(tecla)
    if tecla == "space" then
        adicionarPontos(10)
    elseif tecla == "x" then
        perderVida()
    end
end

function love.draw()
    -- Interface do jogo
    love.graphics.print("Jogador: " .. jogador.nome, 10, 10)
    love.graphics.print("Pontua√ß√£o: " .. pontuacao, 10, 30)
    love.graphics.print("Vidas: " .. vidas, 10, 50)

    -- Instru√ß√µes
    love.graphics.print("SPACE - ganhar pontos", 10, 100)
    love.graphics.print("X - perder vida", 10, 120)

    -- Status do jogo
    if vidas == 0 then
        love.graphics.print("GAME OVER!", 300, 300)
    end
end
```

## üß© 2.7 Desafio Pr√°tico

Crie um sistema de combate simples:

```lua
-- Sistema de combate
local jogador = {
    nome = "Guerreiro",
    vida = 100,
    forca = 15,
    defesa = 5
}

local inimigo = {
    nome = "Goblin",
    vida = 50,
    forca = 10,
    defesa = 2
}

function calcularDano(atacante, defensor)
    local danoBase = atacante.forca
    local defesaEfetiva = defensor.defesa
    local danoFinal = math.max(1, danoBase - defesaEfetiva)
    return danoFinal
end

function atacar(atacante, defensor)
    local dano = calcularDano(atacante, defensor)
    defensor.vida = defensor.vida - dano

    print(atacante.nome .. " ataca " .. defensor.nome)
    print("Dano causado: " .. dano)
    print(defensor.nome .. " tem " .. defensor.vida .. " de vida")

    if defensor.vida <= 0 then
        print(defensor.nome .. " foi derrotado!")
        return true
    end
    return false
end

function love.keypressed(tecla)
    if tecla == "space" and inimigo.vida > 0 then
        local derrotou = atacar(jogador, inimigo)

        if not derrotou and inimigo.vida > 0 then
            atacar(inimigo, jogador)

            if jogador.vida <= 0 then
                print("Voc√™ foi derrotado!")
            end
        end
    elseif tecla == "r" then
        -- Resetar combate
        jogador.vida = 100
        inimigo.vida = 50
        print("Combate reiniciado!")
    end
end

function love.draw()
    -- Status dos personagens
    love.graphics.print("=== COMBATE ===", 300, 100)

    love.graphics.print("JOGADOR:", 100, 150)
    love.graphics.print("Nome: " .. jogador.nome, 100, 170)
    love.graphics.print("Vida: " .. jogador.vida, 100, 190)
    love.graphics.print("For√ßa: " .. jogador.forca, 100, 210)

    love.graphics.print("INIMIGO:", 500, 150)
    love.graphics.print("Nome: " .. inimigo.nome, 500, 170)
    love.graphics.print("Vida: " .. inimigo.vida, 500, 190)
    love.graphics.print("For√ßa: " .. inimigo.forca, 500, 210)

    -- Instru√ß√µes
    love.graphics.print("SPACE - Atacar", 300, 350)
    love.graphics.print("R - Reiniciar", 300, 370)

    -- Status do jogo
    if jogador.vida <= 0 then
        love.graphics.print("VOC√ä PERDEU!", 300, 300)
    elseif inimigo.vida <= 0 then
        love.graphics.print("VOC√ä VENCEU!", 300, 300)
    end
end
```

## ‚úÖ Conclus√£o do Cap√≠tulo

Voc√™ aprendeu:

-   Como aplicar configura√ß√µes
-   Como aplicar conceitos lua em jogos com L√ñVE2D

## üí° Dicas Importantes

-   **√çndices em Lua**: Arrays come√ßam no √≠ndice 1, n√£o 0
-   **Concatena√ß√£o**: Use `..` para juntar strings
-   **Compara√ß√£o**: Use `==` para igualdade e `~=` para diferen√ßa
-   **Valores falsos**: Apenas `false` e `nil` s√£o falsos em Lua
-   **Escopo**: Use `local` para vari√°veis locais (boa pr√°tica)
