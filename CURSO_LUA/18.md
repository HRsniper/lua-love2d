# Capítulo 18: The Library: Mathematical, Operating System, Debug

## Mathematical

Funções trigonométricas: ``math.sin``, ``math.cos``, ``math.tan``, ``math.rad``, ``math.deg``

Exponenciais e logaritmos: ``math.exp``, ``math.log``, ``math.log10``, ``math.pow``

Arredondamento e parte fracionária: ``math.floor``, ``math.ceil``, ``math.modf``, ``math.abs``

Raiz quadrada e funções de máximo/mínimo: ``math.sqrt``, ``math.max``, ``math.min``

Números aleatórios: ``math.random``, ``math.randomseed``


## Exemplo 1: Trigonometria e conversão de graus/radianos
```lua
local graus = 45
local rad = math.rad(graus)             -- converte graus para radianos
print("cos(45°) =", math.cos(rad))      -- Retorna o co-seno: 0.70710678118655
print("deg(π/4) =", math.deg(math.pi/4))-- converte radianos para graus
print("graus° =", math.deg(rad))
```
## Exemplo 2: Arredondamento e parte inteira/fracionária
```lua
local x = 3.75
local intp, fracp = math.modf(x) -- Retorna dois números, a parte integral de x e a parte fracionária de x.
print("floor:", math.floor(x))          -- 3 Arredondar para baixo
print("ceil:", math.ceil(x))            -- 4 Arredondar para cima
print("modf:", intp, fracp)             -- 3  0.75
lua
```

## Exemplo 3: Números aleatórios com seed controlada
```lua
math.randomseed(os.time())
for i = 1, 5 do
  print("Aleatório [1,100]:", math.random(1,100))
end
-- Aleatório [1,100]: 31
```

##  Operating System

Interagir com o sistema operacional para comandos e variáveis de ambiente

Controlar tempo de execução e datas

Gerenciar diretórios e remover arquivos via Lua

Execução de comandos externos: ``os.execute,`` ``os.remove,`` ``os.rename``

Variáveis de ambiente: ``os.getenv,`` ``os.setlocale``

Data e hora: ``os.time,`` ``os.date,`` ``os.difftime``

Encerramento de programa: ``os.exit``

## Exemplo 1: Informações de data/hora
```lua
local now = os.time()
print("Hoje:", os.date("%d/%m/%Y", now))
print("Hora:", os.date("%H:%M:%S", now))
-- Hoje: 10/09/2025
-- Hora: 05:19:18
```
## Exemplo 2: Executar comando e capturar código de saída
```lua
local res = os.execute("mkdir teste_dir")
print("Código de saída:", res)
```

## Debug

Inspecionar pilha de chamadas e variáveis em tempo de execução

Definir ganchos (hooks) para depuração e cobertura de código

Funções: ``debug.getinfo``, ``debug.getlocal``, ``debug.setlocal``

Ganchos com ``debug.sethook`` para linhas, chamadas e retornos

Dump de bytecode: ``string.dump``

## Exemplo 1: Obter informações da função atual
```lua
local function foo()
    local a = 10
    local info = debug.getinfo(1, "nSl")
    print("Função:", info.name or "<anon>", "Linha:", info.currentline)
end
foo()
-- Função: foo     Linha:  3
```
## Exemplo 2: Hook para contar chamadas de linha
```lua
local count = 0
debug.sethook(function() count = count + 1 end, "l")
for i=1,100 do local x = i*2 end
debug.sethook()
print("Linhas executadas:", count)
-- Linhas executadas:      101
```
